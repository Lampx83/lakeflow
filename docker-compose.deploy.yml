# Override dùng khi deploy lên server (chạy cùng docker-compose.yml)
# Ví dụ: docker compose -f docker-compose.yml -f docker-compose.deploy.yml up -d --build
#
# - lakeflow_data: named volume (không bind path Mac/Linux cụ thể)
# - Backend: bỏ mount source, bỏ --reload
# - Frontend: bỏ mount ./backend

services:
  lakeflow-backend:
    volumes:
      - lakeflow_data:/data
    command: uvicorn lakeflow.main:app --host 0.0.0.0 --port 8011

  lakeflow-frontend:
    volumes:
      - lakeflow_data:/data

# Ghi đè volume: dùng named volume chuẩn (không bind path Mac từ docker-compose.yml)
volumes:
  lakeflow_data:
    driver: local
    # Không dùng driver_opts → volume nằm trong /var/lib/docker/volumes/ trên server
